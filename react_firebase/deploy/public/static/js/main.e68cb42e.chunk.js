(this.webpackJsonpreact_firebase=this.webpackJsonpreact_firebase||[]).push([[0],{31:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(21),a=n.n(c),i=n(8),s=n(15),l=n(5),o=n(11),j=n.n(o),u=n(13),b=n(14),d=n(16);n(27),n(32),n(33);d.a.initializeApp({apiKey:"AIzaSyCLOK2B-KAL7G0UE16tX3PtA94n-1gIizg",authDomain:"react-firebase-3d08d.firebaseapp.com",projectId:"react-firebase-3d08d",storageBucket:"react-firebase-3d08d.appspot.com",messagingSenderId:"577337264865",appId:"1:577337264865:web:6dbb401118515d011fc5a0"});var x=d.a.auth(),O=d.a.firestore(),h=d.a.storage(),f=d.a,p=n(1);var m=function(e){var t=e.board,n=e.onClickDelete,r=e.onClickEdit,c=e.userObj;return Object(p.jsxs)("table",{border:"1",style:{width:"500px",textAlign:"center"},children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"id"}),Object(p.jsx)("th",{children:"email"}),Object(p.jsx)("th",{children:"introduce"}),Object(p.jsx)("th",{children:"\uc774\ubbf8\uc9c0"}),Object(p.jsx)("th",{children:"\uc218\uc815"}),Object(p.jsx)("th",{children:"\uc0ad\uc81c"})]})}),Object(p.jsx)("tbody",{children:t.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t+1}),Object(p.jsx)("td",{children:e.email}),Object(p.jsx)("td",{children:e.introduce}),e.fileList.length>0?Object(p.jsx)("td",{children:Object(p.jsx)("img",{src:e.fileList[0].imgUrl,width:"150",alt:"\uc124\uc815\uc774\ubbf8\uc9c0"})}):Object(p.jsx)("td",{}),c.email===e.email?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("td",{children:Object(p.jsx)("button",{onClick:function(){return r(e.id,e.email,e.fileList)},children:"\uc218\uc815"})}),Object(p.jsx)("td",{children:Object(p.jsx)("button",{onClick:function(){return n(e.id,e.email,e.fileList)},children:"\uc0ad\uc81c"})})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("td",{}),Object(p.jsx)("td",{})]})]},e.id)}))})]})},g=n(35);var v=function(e){var t=e.userObj,n=Object(r.useState)(""),c=Object(i.a)(n,2),a=c[0],s=c[1],l=Object(r.useState)([]),o=Object(i.a)(l,2),d=o[0],x=o[1],f=Object(r.useRef)(),v=Object(r.useRef)(),k=Object(r.useState)(""),w=Object(i.a)(k,2),L=w[0],y=w[1];Object(r.useEffect)((function(){return O.collection("board").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(b.a)(Object(b.a)({},e.data()),{},{id:e.id})}));x(t)})),f.current.focus(),function(){x([])}}),[]);var S=function(){var e=Object(u.a)(j.a.mark((function e(n){var r,c,i,s,l,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.preventDefault(),!v.current.files[0]){e.next=17;break}return r=v.current.files[0].name,c=r.substr(r.lastIndexOf(".")),i="".concat(Object(g.a)()).concat(c),s=h.ref().child("".concat(t.email,"/").concat(i)),e.next=9,s.put(v.current.files[0]);case 9:return l=e.sent,e.next=12,l.ref.getDownloadURL();case 12:return o=e.sent,e.next=15,O.collection("board").add({email:t.email,introduce:a,fileList:[{fileName:i,imgUrl:o}]});case 15:e.next=19;break;case 17:return e.next=19,O.collection("board").add({email:t.email,introduce:a,fileList:[]});case 19:f.current.value="",v.current.value="",y(""),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(j.a.mark((function e(n,r,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.email!==r){e.next=12;break}if(!c.length){e.next=8;break}return e.next=4,h.ref().child("".concat(t.email,"/").concat(c[0].fileName)).delete();case 4:return e.next=6,O.collection("board").doc(n).delete();case 6:e.next=10;break;case 8:return e.next=10,O.collection("board").doc(n).delete();case 10:e.next=13;break;case 12:alert("\ub0b4\uac00 \uc4f4 \uae00\uc774 \uc544\ub2d9\ub2c8\ub2e4");case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(j.a.mark((function e(n,r,c){var a,i,s,l,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.email!==r){e.next=27;break}if(!v.current.files[0]){e.next=20;break}return e.next=4,h.ref().child("".concat(t.email,"/").concat(c[0].fileName)).delete();case 4:return e.next=6,O.collection("board").doc(n).delete();case 6:return a=v.current.files[0].name,i=a.substr(a.lastIndexOf(".")),s="".concat(Object(g.a)()).concat(i),l=h.ref().child("".concat(t.email,"/").concat(s)),e.next=12,l.put(v.current.files[0]);case 12:return o=e.sent,e.next=15,o.ref.getDownloadURL();case 15:return u=e.sent,e.next=18,O.collection("board").doc(n).set({email:t.email,introduce:f.current.value,fileList:[{fileName:s,imgUrl:u}]});case 18:e.next=22;break;case 20:return e.next=22,O.collection("board").doc(n).set({email:t.email,introduce:f.current.value,fileList:[]});case 22:f.current.value="",v.current.value="",y(""),e.next=28;break;case 27:alert("\ub0b4\uac00 \uc4f4 \uae00\uc774 \uc544\ub2d9\ub2c8\ub2e4");case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"Home page"}),Object(p.jsx)("br",{}),d.length>0&&Object(p.jsx)(m,{board:d,onClickDelete:C,onClickEdit:I,userObj:t}),Object(p.jsxs)("form",{onSubmit:S,children:[Object(p.jsx)("input",{ref:f,type:"text",name:"introduce",maxLength:120,placeholder:"introduce",onChange:function(e){s(e.target.value)}}),Object(p.jsx)("input",{ref:v,type:"file",name:"imageSelector",accept:"image/*",onChange:function(e){var t=URL.createObjectURL(e.target.files[0]);y(t)}}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"submit"})]}),L&&Object(p.jsx)("img",{src:L,alt:"\ubbf8\ub9ac\ubcf4\uae30 \uc774\ubbf8\uc9c0",width:"500"})]})};var k=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("h3",{children:"Profile page"})})},w=n(17);var L=function(){var e=Object(r.useState)({email:"",password:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(i.a)(a,2),l=s[0],o=s[1],d=function(){var e=Object(u.a)(j.a.mark((function e(t){var r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),r=n.email,c=n.password,"LoginForm"!==(a=t.target.id)){e.next=9;break}return e.next=7,x.signInWithEmailAndPassword(r,c);case 7:e.next=12;break;case 9:if("SignupForm"!==a){e.next=12;break}return e.next=12,x.createUserWithEmailAndPassword(r,c);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),o(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){var t=e.target,r=t.name,a=t.value;c(Object(b.a)(Object(b.a)({},n),{},Object(w.a)({},r,a)))},h=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"google"===(n=t.target.name)?r=new f.auth.GoogleAuthProvider:"github"===n&&(r=new f.auth.GithubAuthProvider),e.next=5,x.signInWithPopup(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"Login page"}),l&&Object(p.jsx)("p",{style:{color:"red"},children:l}),Object(p.jsx)("h4",{children:"Login"}),Object(p.jsxs)("form",{id:"LoginForm",onSubmit:d,children:[Object(p.jsx)("input",{type:"email",name:"email",placeholder:"Email",onChange:O}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:O}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"submit",value:"Log in"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{name:"google",onClick:h,children:"Google Login"}),Object(p.jsx)("button",{name:"github",onClick:h,children:"Github Login"})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("h4",{children:"Sign Up"}),Object(p.jsxs)("form",{id:"SignupForm",onSubmit:d,children:["\uc774\uba54\uc77c : ",Object(p.jsx)("input",{type:"email",name:"email",placeholder:"Email",onChange:O}),Object(p.jsx)("br",{}),"\ube44\ubc00\ubc88\ud638 : ",Object(p.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:O}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"submit",value:"Sign up"})]})]})};var y=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("h3",{children:"EditProfile page"})})};var S=function(e){var t=e.isLoggedIn;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/",children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/profile",children:"profile"})}),Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/edit",children:"Edit profile"})}),t&&Object(p.jsx)("li",{children:Object(p.jsx)("button",{onClick:function(){x.signOut()},children:"Logout"})})]})})};var C=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(p.jsxs)(s.a,{children:[Object(p.jsx)(S,{isLoggedIn:t}),Object(p.jsx)(l.c,{children:t?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l.a,{path:"/",element:Object(p.jsx)(v,{userObj:n})}),Object(p.jsx)(l.a,{path:"/profile",element:Object(p.jsx)(k,{})}),Object(p.jsx)(l.a,{path:"/edit",element:Object(p.jsx)(y,{})})]}):Object(p.jsx)(l.a,{path:"*",element:Object(p.jsx)(L,{})})})]})};var I=function(){var e=Object(r.useState)(x.currentUser),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),s=Object(i.a)(a,2),l=s[0],o=s[1];return Object(r.useEffect)((function(){return x.onAuthStateChanged((function(e){e?(c(e),o(e)):c(!1)})),function(){c(x.currentUser)}}),[]),Object(p.jsx)(C,{isLoggedIn:n,userObj:l})};a.a.render(Object(p.jsx)(I,{}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.e68cb42e.chunk.js.map